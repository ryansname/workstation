name: ci
on:
  push:
jobs:
  x86_64-linux-debug:
    timeout-minutes: 5
    runs-on: [ubuntu-latest]
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Install nix
      uses: cachix/install-nix-action@v20
      with:
        nix_path: nixpkgs=channel:nixos-unstable
    - name: Cachix
      uses: cachix/cachix-action@v12
      with:
        name: ryansname-workstation
        # signingKey: '${{ secrets.CACHIX_SIGNING_KEY }}'
        authToken: '${{ secrets.CACHIX_AUTH_TOKEN }}'
      
    - name: Prepare nix env
      run: nix-shell --run 'zig version'
    - name: Build and Test
      run: sh ci/x86_64-linux-debug.sh
   
